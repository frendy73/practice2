## Запуск и установка

1. Установка зависимостей (нужно сделать один раз)
 ```bash
 cd service-controller
 npm i
 cd ../service-agent
 npm i
 ```
 2. Теперь нужно запустить сервис-контроллер
 ```bash
 cd service-controller
 node index.js
 ```
 3. Теперь нужно запустить агента
 ```bash
 cd ../service-agent
 node agent.js --id agent1 --url ws://localhost:8080
 ```

## Тестирование
Изначально установлено 3 реплики, которые будут запущены на агенте. Информацию можно узнать, отправив GET-запрос:
```bash
curl http://localhost:3000/status
```
Мы можем расширить количество реплик, например, на 2:
```bash
curl -X POST -H "Content-Type: application/json" -d '{"count": 2}' http://localhost:3000/scale-up
```
Теперь у нас 5 реплик. Они выполняются все на агенте (можно опять проверить их статус).

Попробуем теперь подключить нового агента:
```bash
node agent.js --id agent2 --url ws://localhost:8080
```
Теперь увеличим количество реплик еще на 2:
```bash
curl -X POST -H "Content-Type: application/json" -d '{"count": 2}' http://localhost:3000/scale-up
```
Можно увидеть, что у нас новые две реплики запустились на агенте 2

Можем также уменьшить количество реплик, например, на 1:
```bash
curl -X POST -H "Content-Type: application/json" -d '{"count": 1}' http://localhost:3000/scale-down
```
Можно заметить, что какой-то сервис остановился

Теперь закроем полностью агента 1. Вся нагрузка перейдет на агента 2 сразу.

Можно запускать множество агентов, тогда контроллер будет распредялть новые сервеисы грамотно, чтобы все были заполнены равномерно.
